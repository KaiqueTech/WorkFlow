using WorkFlow.Domain.Interfaces;

namespace WorkFlow.Application.Commands.ApproveRequest
{
    public class ApproveRequestCommandHandler(IRequestRepository repository)
    {

        public async Task Handle(Guid requestId, string managerId, string comment)
        {
            var request = await repository.GetByIdAsync(requestId);
            if (request == null) throw new Exception("Solicitação não encontrada.");

            request.Approve(managerId, comment);

            await repository.UpdateAsync(request);       
        }
    }
}

<div class="p-8 bg-[#09090b] min-h-screen text-zinc-100 font-sans">
  
  <div class="flex justify-between items-center mb-10">
    <div>
      <h1 class="text-3xl font-bold tracking-tight text-white">Dashboard</h1>
      <p class="text-zinc-500 mt-1 text-sm">Gerencie suas solicitações em um só lugar.</p>
    </div>
    
    <div class="flex items-center gap-3">
      <button *ngIf="isUser" (click)="adicionarNova()" 
              class="flex items-center gap-2 px-5 py-2.5 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-semibold transition-all shadow-lg shadow-indigo-500/20 active:scale-95">
        <mat-icon>add_circle_outline</mat-icon>
        Nova Solicitação
      </button>

      <button (click)="logOut()" 
              class="p-2.5 text-zinc-300 hover:text-red-400 border border-zinc-800 rounded-xl transition-all">
        <mat-icon>logout</mat-icon>
      </button>
    </div>
  </div>

  <div class="flex flex-col md:flex-row items-center gap-4 mb-6">
    <div class="relative flex-1 w-full">
      <mat-icon class="absolute left-4 top-1/2 -translate-y-1/2 text-zinc-500 !text-[20px]">search</mat-icon>
      <input type="text" 
             (input)="aoBuscar($event)"
             placeholder="Pesquise por título" 
             class="w-full bg-black border border-zinc-800 rounded-xl py-3 pl-12 pr-4 text-sm focus:border-indigo-500 transition-all placeholder:text-zinc-600">
    </div>

    <div class="flex flex-wrap items-center gap-4">
      <select (change)="aoMudarStatus($event)" class="bg-zinc-900 border border-zinc-800 rounded-xl py-3 px-4 text-sm text-amber-50">
        <option value="">Todos os Status</option>
        <option value="0">Pendente</option>
        <option value="1">Aprovado</option>
        <option value="2">Rejeitado</option>
      </select>

      <select (change)="aoMudarCategoria($event)" class="bg-zinc-900 border border-zinc-800 rounded-xl py-3 px-4 text-sm text-amber-50">
        <option value="">Todas as Categorias</option>
        <option value="1">Compras</option>
        <option value="2">TI</option>
        <option value="3">Reembolso</option>
      </select>

      <select (change)="aoMudarPrioridade($event)" class="bg-zinc-900 border border-zinc-800 rounded-xl py-3 px-4 text-sm text-amber-50">
        <option value="">Todas as Prioridades</option>
        <option value="0">Baixa</option>
        <option value="1">Média</option>
        <option value="2">Alta</option>
      </select>
    </div>
  </div>

  <div class="bg-zinc-900/40 border border-zinc-800 rounded-2xl overflow-hidden shadow-xl">
    
    <div *ngIf="loading" class="flex flex-col items-center justify-center py-24">
      <div class="w-10 h-10 border-4 border-indigo-500/20 border-t-indigo-500 rounded-full animate-spin mb-4"></div>
      <p class="text-zinc-500 animate-pulse font-medium">Sincronizando...</p>
    </div>

    <table *ngIf="!loading && totalItens > 0" class="w-full text-left border-collapse">
      <thead>
        <tr class="bg-zinc-800/30 text-zinc-400 text-[10px] uppercase tracking-[0.15em] font-bold">
          <th class="px-6 py-4">Solicitação</th>
          <th class="px-6 py-4 text-center">Prioridade</th>
          <th class="px-6 py-4">Status</th>
          <th class="px-6 py-4 text-right">Ações</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-zinc-800/50">
        <tr *ngFor="let req of requests" class="group hover:bg-zinc-800/20 transition-all duration-200">
          <td class="px-6 py-5">
            <div class="flex flex-col gap-1">
              <span class="text-zinc-100 font-medium group-hover:text-indigo-400 transition-colors">{{ req.title }}</span>
              <span class="text-[9px] font-bold text-zinc-500 uppercase tracking-wider">{{ getCategoryLabel(req.category) }}</span>
            </div>
          </td>
          <td class="px-6 py-5 text-center">
            <span [ngClass]="{
              'text-blue-400 border-blue-400/20 bg-blue-400/5': req.priority === 0,
              'text-yellow-400 border-yellow-400/20 bg-yellow-400/5': req.priority === 1,
              'text-red-400 border-red-400/20 bg-red-400/5': req.priority === 2
            }" class="text-[9px] px-2 py-0.5 rounded border font-bold uppercase">
              {{ getPrioridadeLabel(req.priority) }}
            </span>
          </td>
          <td class="px-6 py-5">
            <div class="flex items-center gap-2">
              <div [ngClass]="{
                'bg-yellow-500': req.status === 0,
                'bg-green-500': req.status === 1,
                'bg-red-500': req.status === 2
              }" class="w-1.5 h-1.5 rounded-full shadow-[0_0_8px_currentColor]"></div>
              <span class="text-xs font-bold text-zinc-400 uppercase tracking-tighter">{{ getStatusLabel(req.status) }}</span>
            </div>
          </td>
          <td class="px-6 py-5 text-right">
            <div class="flex justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity">
              <button (click)="verDetalhe(req.id)" class="p-2 hover:bg-zinc-800 rounded-lg text-zinc-500 hover:text-white transition-colors">
                <mat-icon class="!text-[20px]">visibility</mat-icon>
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>

    <div *ngIf="!loading && totalItens === 0" class="py-24 text-center">
      <mat-icon class="text-zinc-800 !text-5xl w-auto h-auto mb-4">search_off</mat-icon>
      <h3 class="text-zinc-200 font-semibold">Nenhum resultado</h3>
      <p class="text-zinc-500 text-sm">Não encontramos solicitações com esses filtros.</p>
    </div>

    <div class="px-6 py-4 bg-zinc-800/20 border-t border-zinc-800 flex items-center justify-between" *ngIf="!loading && totalItens > 0">
      <div class="flex items-center gap-4">
        <div class="text-[10px] font-bold text-zinc-500 uppercase tracking-widest">
          Página <span class="text-indigo-400">{{ paginaAtual + 1 }}</span>
        </div>
        <div class="text-[10px] font-bold text-zinc-500 uppercase tracking-[0.2em] px-3 py-1 bg-black/20 rounded-lg border border-zinc-800/30">
          {{ totalItens }} Resultados
        </div>
      </div>

      <div class="flex gap-2">
        <button (click)="mudarPagina(paginaAtual - 1)" [disabled]="paginaAtual === 0"
          class="flex items-center gap-1 px-4 py-2 text-[10px] font-bold uppercase border border-zinc-800 rounded-lg hover:bg-zinc-800 disabled:opacity-20 transition-all">
          <mat-icon class="!text-sm">chevron_left</mat-icon> Anterior
        </button>
        
        <button (click)="mudarPagina(paginaAtual + 1)" [disabled]="(paginaAtual + 1) * 10 >= totalItens"
          class="flex items-center gap-1 px-4 py-2 text-[10px] font-bold uppercase border border-zinc-800 rounded-lg hover:bg-zinc-800 disabled:opacity-20 transition-all">
          Próximo <mat-icon class="!text-sm">chevron_right</mat-icon>
        </button>
      </div>
    </div>
  </div>
</div>